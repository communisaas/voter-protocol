Centroid Distance Geographic Analysis
======================================

Test Cases Plotted by Distance from City Center:

SEVERE WRONG SOURCE (>50km = REJECT)
┌────────────────────────────────────────────────────────────┐
│                                                            │
│  Lansing, MI → Kansas City area                           │
│  ═══════════════════════════════════════════════════► 949km│
│  District Centroid: -94.89°, 39.25° (Kansas City, MO)     │
│  City Centroid: -84.55°, 42.72° (Lansing, MI)             │
│  Verdict: WRONG STATE                                      │
│                                                            │
│  Morrisville, NC → Wake County center                      │
│  ══════════════════════════► 190km                         │
│  District Centroid: -78.84°, 35.83°                        │
│  City Centroid: -78.02°, 34.26°                            │
│  Verdict: COUNTY DATA                                      │
│                                                            │
└────────────────────────────────────────────────────────────┘

EDGE CASE (10-50km = HUMAN REVIEW)
┌────────────────────────────────────────────────────────────┐
│                                                            │
│  Pearland, TX → Houston center                             │
│  ═══════════► 26km                                         │
│  District Centroid: -95.43°, 29.77° (Houston)              │
│  City Centroid: -95.33°, 29.55° (Pearland)                 │
│  Verdict: METRO AREA BLEEDING                              │
│                                                            │
│  Gresham, OR → Portland center                             │
│  ═══════► 21km                                             │
│  District Centroid: -122.71°, 45.47° (Portland)            │
│  City Centroid: -122.45°, 45.50° (Gresham)                 │
│  Verdict: METRO COUNCIL DATA                               │
│                                                            │
└────────────────────────────────────────────────────────────┘

FALSE NEGATIVES (<10km but WRONG DATA)
┌────────────────────────────────────────────────────────────┐
│                                                            │
│  Cambridge, MA                                             │
│  ═══► 6.4km                                                │
│  District Centroid: -71.08°, 42.32°                        │
│  City Centroid: -71.11°, 42.38°                            │
│  Verdict: OBSOLETE (1993 districts, city uses at-large)   │
│  Layer: "1993_City_Council_Districts"                      │
│                                                            │
│  Escondido, CA                                             │
│  ═► 2.0km                                                  │
│  District Centroid: -117.07°, 33.14°                       │
│  City Centroid: -117.08°, 33.12°                           │
│  Verdict: UNCLEAR (appears correct, needs verification)    │
│                                                            │
│  Newark, NJ                                                │
│  ► 0.8km                                                   │
│  District Centroid: -74.18°, 40.74°                        │
│  City Centroid: -74.19°, 40.74°                            │
│  Verdict: WRONG LAYER (voting precincts, not wards)       │
│  Layer: "TEST_2_City_of_Newark_Pocket_Park_Suggestions"   │
│                                                            │
└────────────────────────────────────────────────────────────┘

DETECTION EFFECTIVENESS BY DISTANCE RANGE
═════════════════════════════════════════════

>50km:  ████████████████████ 100% (2/2) ✅ PERFECT DETECTION
10-50km: ████████████████████ 100% (2/2) ⚠️  EDGE CASE FLAGS
<10km:  ██████               33% (1/3)  ❌ HIGH FALSE NEGATIVE

Overall: ████████████         50% (5/8)  ⚠️  NEEDS COMPLEMENT

MULTI-STAGE VALIDATION IMPROVEMENT
═══════════════════════════════════

Adding Feature Count + Layer Name Analysis:

Centroid Only:     ████████            25% (2/8)
+ Feature Count:   ████████████████    50% (4/8)
+ Layer Name:      ███████████████████ 87.5% (7/8)

Only Escondido passes all filters (requires full tessellation proof).

COST-BENEFIT ANALYSIS
══════════════════════

Pre-Validation Cost: 15ms avg
Tessellation Cost: 1250ms avg
Rejection Rate: 87.5%

Time per city:
- Without pre-validation: 1250ms
- With pre-validation (reject): 15ms
- With pre-validation (pass): 15ms + 1250ms = 1265ms

Savings per rejected city: 1250ms - 15ms = 1235ms (98.8% reduction)

For 706-city dataset with 110 wrong-source cases:
Total time saved: 110 × 0.875 × 1235ms = 118 seconds (2 minutes)

RECOMMENDATION
═══════════════

Implement 3-stage validation pipeline:

Stage 1 (Fast - <20ms):
✓ Centroid distance > 50km → REJECT
✓ Feature count ratio > 3x → REJECT  
✓ Layer name blocklist match → REJECT
✓ Year in name < 2020 → WARN

Stage 2 (Sanity - <100ms):
✓ Bounding box overlap < 50% → REJECT
✓ Area ratio outside [0.5, 2.0] → REJECT

Stage 3 (Full Proof - 500-2000ms):
✓ Tessellation containment/coverage validation

Expected outcome: 80-90% of wrong-source data rejected in Stage 1,
saving 2-3 minutes of compute time per batch validation run.

